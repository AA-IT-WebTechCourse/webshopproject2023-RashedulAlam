(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[979],{3393:function(e,t,s){Promise.resolve().then(s.bind(s,7117))},7117:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return f}});var r,a,l=s(7437),i=s(2265),n=s(5988),o=s(8431),c=e=>{let{viewType:t,setViewType:s}=e;return(0,l.jsxs)("div",{className:"flex flex-row gap-4 items-center",children:[(0,l.jsx)("button",{"aria-label":"list view",className:"w-fit h-fit p-1",onClick:()=>s(o.b.LIST_VIEW),children:(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t===o.b.LIST_VIEW?"stroke-blue-400":"stroke-gray-400",children:[(0,l.jsx)("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),(0,l.jsx)("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),(0,l.jsx)("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),(0,l.jsx)("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),(0,l.jsx)("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),(0,l.jsx)("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]})}),(0,l.jsx)("button",{"aria-label":"grid view",className:"w-fit h-fit p-1",onClick:()=>s(o.b.GRID_VIEW),children:(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"gray",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t===o.b.GRID_VIEW?"stroke-blue-400":"stroke-gray-400",children:[(0,l.jsx)("rect",{x:"3",y:"3",width:"7",height:"7"}),(0,l.jsx)("rect",{x:"14",y:"3",width:"7",height:"7"}),(0,l.jsx)("rect",{x:"14",y:"14",width:"7",height:"7"}),(0,l.jsx)("rect",{x:"3",y:"14",width:"7",height:"7"})]})})]})},x=s(4303);(r=a||(a={})).ADD="ADD",r.REMOVE="REMOVE";var d=e=>{let{product:t,viewType:s=o.b.LIST_VIEW,addToCart:r,removeFromCart:a,showActionButton:n,isExistsOnCart:c}=e,[d,u]=(0,i.useState)(!1),h=(e,t)=>{u(!0),"ADD"==e?r&&r(t):a&&a(t),setTimeout(()=>{u(!1)},1e3)},{created_at:p,description:m,id:w,owner_name:j,price:g,title:f}=t,v=c&&c(t),y=v?"REMOVE":"ADD";return(0,l.jsxs)(l.Fragment,{children:[s===o.b.GRID_VIEW&&(0,l.jsx)("div",{className:"w-72 bg-white shadow-md rounded-xl duration-500 hover:scale-105 hover:shadow-xl",children:(0,l.jsxs)("div",{className:"px-4 py-3 w-72",children:[(0,l.jsxs)("p",{className:"text-white text-xs w-fit p-1 rounded-md bg-yellow-500",children:["Seller: ",j]}),(0,l.jsx)("p",{className:"text-lg font-bold text-blue-600 truncate block capitalize",children:f}),(0,l.jsx)("div",{className:"text-gray-400 text-xs py-2 min-h-40",children:m}),(0,l.jsxs)("p",{className:"text-white text-xs w-fit p-1 rounded-md bg-green-500",children:["Published: ",(0,x.F)(p)]}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsxs)("p",{className:"text-lg font-semibold text-blue-400 cursor-auto my-3",children:["$",g]}),n&&(0,l.jsxs)("button",{className:"ml-auto relative","aria-label":"add to cart",onClick:()=>h(y,t),disabled:d,type:"button",children:[d&&(0,l.jsxs)("svg",{className:"animate-spin h-8 w-8 text-white absolute z-10 -top-1.5 -left-1.5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,l.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"gray",strokeWidth:"4"}),(0,l.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),v?(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5",children:[(0,l.jsx)("circle",{cx:"9",cy:"21",r:"1"}),(0,l.jsx)("circle",{cx:"20",cy:"21",r:"1"}),(0,l.jsx)("path",{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"}),(0,l.jsx)("line",{x1:"12",y1:"10",x2:"18",y2:"10"})]}):(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5",children:[(0,l.jsx)("circle",{cx:"9",cy:"21",r:"1"}),(0,l.jsx)("circle",{cx:"20",cy:"21",r:"1"}),(0,l.jsx)("path",{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"}),(0,l.jsx)("line",{x1:"12",y1:"9",x2:"12",y2:"15"}),(0,l.jsx)("line",{x1:"9",y1:"12",x2:"15",y2:"12"})]})]})]})]})}),s===o.b.LIST_VIEW&&(0,l.jsxs)("div",{className:"w-full bg-white shadow-md rounded-xl duration-500 hover:scale-[1.02] hover:shadow-xl flex flex-row justify-between",children:[(0,l.jsx)("div",{className:"flex",children:(0,l.jsxs)("div",{className:"px-4 py-3 w-fit flex flex-col justify-start gap-1",children:[(0,l.jsxs)("p",{className:"text-white text-xs w-fit p-1 rounded-md bg-yellow-500",children:["Seller: ",j]}),(0,l.jsx)("p",{className:"text-lg font-bold text-blue-800 truncate block capitalize",children:f}),(0,l.jsx)("div",{className:"flex flex-row gap-2",children:(0,l.jsxs)("p",{className:"text-white text-xs w-fit p-1 rounded-md bg-green-500",children:["Published Date: ",(0,x.F)(p)]})}),(0,l.jsxs)("div",{className:"flex items-center mt-10",children:[(0,l.jsxs)("p",{className:"text-lg font-semibold text-blue-400 cursor-auto",children:["$",g]}),n&&(0,l.jsxs)("button",{className:"ml-auto relative","aria-label":"add to cart",type:"button",onClick:()=>h(y,t),children:[d&&(0,l.jsxs)("svg",{className:"animate-spin h-8 w-8 text-white absolute z-10 -top-1.5 -left-1.5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,l.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"gray",strokeWidth:"4"}),(0,l.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),v?(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5",children:[(0,l.jsx)("circle",{cx:"9",cy:"21",r:"1"}),(0,l.jsx)("circle",{cx:"20",cy:"21",r:"1"}),(0,l.jsx)("path",{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"}),(0,l.jsx)("line",{x1:"12",y1:"10",x2:"18",y2:"10"})]}):(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5",children:[(0,l.jsx)("circle",{cx:"9",cy:"21",r:"1"}),(0,l.jsx)("circle",{cx:"20",cy:"21",r:"1"}),(0,l.jsx)("path",{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"}),(0,l.jsx)("line",{x1:"12",y1:"9",x2:"12",y2:"15"}),(0,l.jsx)("line",{x1:"9",y1:"12",x2:"15",y2:"12"})]})]})]})]})}),(0,l.jsx)("div",{className:"flex max-w-96 px-4 py-3",children:(0,l.jsx)("div",{className:"text-gray-400 text-xs",children:m})})]})]})},u=e=>{let{products:t,viewType:s,addToCart:r,removeFromCart:a,showActionButton:i,isExistsOnCart:n}=e,o={viewType:s,addToCart:r,removeFromCart:a,showActionButton:i,isExistsOnCart:n};return(0,l.jsx)("div",{className:"flex flex-row gap-4 flex-wrap justify-start",children:t.map((e,t)=>(0,l.jsx)(d,{product:e,...o},t))})},h=s(8498),p=s(4064),m=s(9306),w=s(5070),j=s(1537),g=s(8795),f=()=>{let[e,t]=(0,i.useState)(o.b.GRID_VIEW),[s,r]=(0,i.useState)(""),[a,x]=(0,i.useState)(1),[d,f]=(0,i.useState)([]),[v,y]=(0,i.useState)(1),{addToCart:N,removeFromCart:b,isExistsOnCart:E}=(0,p.useCart)(),[S,A]=(0,i.useState)(!0),{isLoggedIn:T}=(0,m.useAuth)();return(0,i.useEffect)(()=>{A(!0),w.Z.get(j.Z.API_URLS.PRODUCT.PRODUCTS(a,s)).then(e=>{let{data:t}=e;t&&(f(t.results),y(Math.ceil(t.count/j.Z.PAGINATION.PAGE_SIZE))),setTimeout(()=>{A(!1)},500)},()=>{setTimeout(()=>{A(!1)},500)})},[s,a]),(0,l.jsxs)("div",{className:"flex flex-col gap-4 min-w-full",children:[(0,l.jsxs)("div",{className:"flex flex-row justify-between w-full items-center",children:[(0,l.jsx)(n.Z,{onSearch:r,searchText:s}),(0,l.jsx)(c,{setViewType:t,viewType:e})]}),S?(0,l.jsx)(g.Z,{viewType:e}):(0,l.jsx)(u,{products:d,viewType:e,addToCart:N,removeFromCart:b,showActionButton:!!T,isExistsOnCart:E}),(0,l.jsx)(h.Z,{currentPage:a,totalPages:v,onPageChange:x})]})}},8795:function(e,t,s){"use strict";var r=s(7437);s(2265);var a=s(2603),l=s(8431);let i=()=>(0,r.jsx)("div",{className:"w-72 bg-white shadow-md rounded-xl duration-500 hover:scale-105 hover:shadow-xl",children:(0,r.jsxs)("div",{className:"px-4 py-3 w-72",children:[(0,r.jsx)("p",{className:"text-white text-xs w-20 p-1 rounded-md",children:(0,r.jsx)(a.Z,{})}),(0,r.jsx)("p",{className:"text-lg font-bold text-blue-600 truncate block capitalize",children:(0,r.jsx)(a.Z,{})}),(0,r.jsx)("div",{className:"text-gray-400 text-xs py-2",children:(0,r.jsx)(a.Z,{className:"h-40"})}),(0,r.jsx)("p",{className:"text-white text-xs w-20 p-1 rounded-md",children:(0,r.jsx)(a.Z,{})}),(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsx)("p",{className:"text-lg font-semibold text-blue-400 cursor-auto my-3 w-20",children:(0,r.jsx)(a.Z,{})})})]})}),n=()=>(0,r.jsxs)("div",{className:"w-full bg-white shadow-md rounded-xl duration-500 hover:scale-[1.02] hover:shadow-xl flex flex-row justify-between",children:[(0,r.jsx)("div",{className:"flex",children:(0,r.jsxs)("div",{className:"px-4 py-3 w-fit flex flex-col justify-start gap-1",children:[(0,r.jsx)("p",{className:"text-white text-xs w-20 rounded-md",children:(0,r.jsx)(a.Z,{})}),(0,r.jsx)("p",{className:"text-lg font-bold text-blue-800 truncate block capitalize w-40",children:(0,r.jsx)(a.Z,{})}),(0,r.jsx)("div",{className:"flex flex-row gap-2",children:(0,r.jsx)("p",{className:"text-white text-xs w-20 h-8 rounded-md ",children:(0,r.jsx)(a.Z,{})})}),(0,r.jsx)("div",{className:"flex items-center mt-10",children:(0,r.jsx)("p",{className:"text-lg font-semibold text-blue-400 cursor-auto w-20",children:(0,r.jsx)(a.Z,{})})})]})}),(0,r.jsx)("div",{className:"flex w-80 px-4 py-3",children:(0,r.jsx)("div",{className:"text-gray-400 text-xs w-full",children:(0,r.jsx)(a.Z,{className:"w-80 h-40"})})})]});t.Z=e=>{let{viewType:t}=e,s=Array(8).fill(1);return(0,r.jsx)("div",{className:"flex flex-row gap-4 flex-wrap justify-start",children:s.map((e,s)=>t==l.b.GRID_VIEW?(0,r.jsx)(i,{},s):(0,r.jsx)(n,{},s))})}},8498:function(e,t,s){"use strict";var r=s(7437);s(2265),t.Z=e=>{let{currentPage:t=1,totalPages:s=0,onPageChange:a}=e;return(0,r.jsxs)("div",{className:"flex flex-row p-1 gap-2 items-center justify-center w-full",children:[(0,r.jsx)("button",{"aria-label":"previous page",onClick:()=>a&&a(t-1),disabled:1==t,children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"gray",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("polyline",{points:"15 18 9 12 15 6"})})}),(0,r.jsxs)("span",{className:"text-blue-500",children:[t," of ",s]}),(0,r.jsx)("button",{"aria-label":"next page",onClick:()=>a&&a(t+1),disabled:t==s,children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"gray",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("polyline",{points:"9 18 15 12 9 6"})})})]})}},8431:function(e,t,s){"use strict";var r,a;s.d(t,{b:function(){return r}}),(a=r||(r={}))[a.LIST_VIEW=0]="LIST_VIEW",a[a.GRID_VIEW=1]="GRID_VIEW"},5988:function(e,t,s){"use strict";var r=s(7437);s(2265),t.Z=e=>{let{searchText:t,onSearch:s}=e;return(0,r.jsxs)("div",{className:"flex relative h-12",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"stroke-gray-400 absolute left-2 top-3",children:[(0,r.jsx)("circle",{cx:"11",cy:"11",r:"8"}),(0,r.jsx)("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),(0,r.jsx)("input",{id:"product-search",type:"text",className:"placeholder shadow appearance-none border rounded w-full py-3 px-4 pl-10 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",placeholder:"search products",defaultValue:t,onChange:e=>s(e.target.value)})]})}},1537:function(e,t){"use strict";t.Z={API_HOST:"http://127.0.0.1:8000/",LOCAL_STORAGE:{TOKEN:"token",USER_NAME:"username",CART:{PRODUCTS:"products"}},API_URLS:{POPULATE_DB:"api/v1/initialization/",AUTH:{LOGIN:"api/v1/core/token/",REGISTER:"api/v1/user-management/register/"},PRODUCT:{PRODUCTS:(e,t)=>"api/v1/public/products?page=".concat(e).concat(t?"&search=".concat(t):""),GET_PRODUCT:e=>"api/v1/inventory/products/".concat(e,"/"),ADD_PRODUCT:"api/v1/inventory/products/",UPDATE_PRODUCT:e=>"api/v1/inventory/products/".concat(e,"/")},INVENTORY:{PRODUCTS:(e,t,s)=>"api/v1/inventory/products/?page=".concat(e,"&type=").concat(t).concat(s?"&search=".concat(s):"")},USER_MANAGEMENT:{CURRENT_USER:"api/v1/user-management/current-user/",UPDATE_USER_PASSWORD:"api/v1/user-management/change-password/"},PAY:"api/v1/pay/"},PAGINATION:{PAGE_SIZE:10}}},9306:function(e,t,s){"use strict";s.r(t),s.d(t,{AuthenticationProvider:function(){return n},useAuth:function(){return o}});var r=s(7437),a=s(2265),l=s(1537);let i=(0,a.createContext)({}),n=e=>{let{children:t}=e,[s,n]=(0,a.useState)(!0),[o,c]=(0,a.useState)(null),x=()=>{localStorage.clear(),c(null)};return(0,a.useEffect)(()=>{c(localStorage.getItem(l.Z.LOCAL_STORAGE.TOKEN)&&localStorage.getItem(l.Z.LOCAL_STORAGE.USER_NAME)?{token:localStorage.getItem(l.Z.LOCAL_STORAGE.TOKEN),username:localStorage.getItem(l.Z.LOCAL_STORAGE.USER_NAME)}:null),n(!1)},[n]),(0,a.useEffect)(()=>{let e=e=>{e.key===l.Z.LOCAL_STORAGE.TOKEN&&!e.newValue&&o&&x()};return window.addEventListener("storage",e),()=>{window.removeEventListener("storage",e)}},[o]),(0,r.jsx)(r.Fragment,{children:s?(0,r.jsx)(r.Fragment,{children:" "}):(0,r.jsx)(i.Provider,{value:{user:o,setUserLoggedIn:e=>{(null==e?void 0:e.token)&&localStorage.setItem(l.Z.LOCAL_STORAGE.TOKEN,null==e?void 0:e.token),(null==e?void 0:e.username)&&localStorage.setItem(l.Z.LOCAL_STORAGE.USER_NAME,null==e?void 0:e.username),c(e)},isLoggedIn:!!o,logoutUser:x},children:t})})},o=()=>(0,a.useContext)(i)},4064:function(e,t,s){"use strict";s.r(t),s.d(t,{CartProvider:function(){return c},useCart:function(){return x}});var r=s(7437),a=s(2265),l=s(1537),i=s(6123),n=s(9306);let o=(0,a.createContext)({products:[]}),c=e=>{let{children:t}=e,[s,c]=(0,a.useState)([]),[x,d]=(0,a.useState)(!0),{user:u,isLoggedIn:h}=(0,n.useAuth)(),p=e=>{setTimeout(()=>{localStorage.setItem(l.Z.LOCAL_STORAGE.CART.PRODUCTS,JSON.stringify(e))})};return(0,a.useEffect)(()=>{var e;c(localStorage.getItem(l.Z.LOCAL_STORAGE.CART.PRODUCTS)?JSON.parse(null!==(e=localStorage.getItem(l.Z.LOCAL_STORAGE.CART.PRODUCTS))&&void 0!==e?e:"[]"):[]),d(!1)},[c]),(0,r.jsx)(r.Fragment,{children:x?(0,r.jsx)(r.Fragment,{}):(0,r.jsx)(o.Provider,{value:{products:s,addToCart:e=>{if((null==u?void 0:u.username)==e.owner_name){i.toast.error("".concat(e.title," can not be added as it's your own product!"));return}c(t=>{let s=[...t,e];return p(s),s}),i.toast.success("".concat(e.title," has been added to your cart!"))},removeFromCart:e=>{c(t=>{let s=t.filter(t=>t.id!==e.id);return p(s),s}),i.toast.warning("".concat(e.title," has been removed from your cart!"))},isExistsOnCart:e=>!!s.find(t=>t.id===e.id),mergeUpdatedProducts:e=>{c(t=>{let s=e.reduce((e,t)=>Object.assign(e,{[t.id]:t}),{});return t.map(e=>s[e.id]?s[e.id]:e)})},clearAll:()=>{c([]),p([])}},children:t})})},x=()=>(0,a.useContext)(o)},5070:function(e,t,s){"use strict";s.d(t,{z:function(){return i}});var r=s(1537),a=s(3107);let l=a.default.create({baseURL:r.Z.API_HOST,timeout:4e4,headers:{Accept:"application/json","Content-Type":"application/json; charset=utf-8"}}),i=a.default.create({baseURL:r.Z.API_HOST,timeout:4e4,headers:{Accept:"application/json","Content-Type":"application/json; charset=utf-8"}});i.interceptors.request.use(e=>{let t=localStorage.getItem(r.Z.LOCAL_STORAGE.TOKEN);return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),i.interceptors.response.use(e=>e,e=>(e.response&&401===e.response.status&&(localStorage.clear(),window.location.href="/login"),Promise.reject(e))),t.Z=l},4303:function(e,t,s){"use strict";s.d(t,{F:function(){return a}});var r=s(3125);let a=e=>(0,r.WU)(e,"MMM d, yyyy, h:mm a")}},function(e){e.O(0,[107,123,502,971,69,744],function(){return e(e.s=3393)}),_N_E=e.O()}]);