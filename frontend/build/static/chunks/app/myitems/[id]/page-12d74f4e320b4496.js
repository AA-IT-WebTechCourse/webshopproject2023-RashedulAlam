(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[896],{2184:function(e,t,r){Promise.resolve().then(r.bind(r,7930))},7160:function(e,t,r){"use strict";var n=r(7437),s=r(9306),o=r(7907),a=r(2265);t.Z=function(e){return t=>{let{isLoggedIn:r}=(0,s.useAuth)(),i=(0,o.useRouter)();return((0,a.useEffect)(()=>{r||i.push("/login")},[r,i]),r)?(0,n.jsx)(e,{...t}):null}}},7930:function(e,t,r){"use strict";r.r(t);var n=r(7437),s=r(2265),o=r(2670),a=r(7907),i=r(5070),l=r(1537),c=r(6123);let u=(0,r(7160).Z)(()=>{var e,t,r;let{register:u,handleSubmit:d,setValue:p,formState:{errors:m}}=(0,o.cI)(),h=(0,a.useParams)(),f=(0,a.useRouter)(),[x,E]=(0,s.useState)(!1),[v,g]=(0,s.useState)(!1),A=e=>{E(!0),i.z.put(l.Z.API_URLS.PRODUCT.UPDATE_PRODUCT(b),e).then(()=>{c.toast.success("Producted updated !"),E(!1)},()=>{c.toast.error("Could not update product !"),E(!1)})},{id:b}=h;return(0,s.useEffect)(()=>{b&&i.z.get(l.Z.API_URLS.PRODUCT.GET_PRODUCT(b)).then(e=>{let{data:t}=e;p("title",t.title),p("price",t.price),p("description",t.description),t.is_readonly&&g(!0)},e=>{404==e.status?f.push("/myitems"):console.log(e)})},[p,b,f]),(0,n.jsx)("div",{className:"flex justify-center items-center min-w-full ",children:(0,n.jsxs)("div",{className:"px-4 pt-6 pb-8 mb-4 w-full max-w-xl",children:[(0,n.jsx)("h2",{className:"text-3xl font-bold mb-6 text-left text-blue-600",children:(0,n.jsx)("span",{className:" bg-clip-text",children:"Update Product"})}),(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),d(A)(e)},noValidate:!0,children:[(0,n.jsxs)("div",{className:"mb-6 flex flex-col",children:[(0,n.jsx)("label",{htmlFor:"title",className:"block text-gray-700 text-sm font-bold mb-2",children:"Title"}),(0,n.jsx)("div",{children:(0,n.jsx)("input",{id:"title",...u("title",{required:!0}),type:"text",className:"shadow appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",placeholder:"Enter title",disabled:!0})}),(null===(e=m.title)||void 0===e?void 0:e.type)==="required"&&(0,n.jsx)("p",{role:"alert",className:"text-red-600 font-semibold mt-2",children:"Title is required"})]}),(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("label",{htmlFor:"price",className:"block text-gray-700 text-sm font-bold mb-2",children:"Price"}),(0,n.jsx)("div",{children:(0,n.jsx)("input",{id:"price",type:"number",...u("price",{required:!0,min:{value:1e-4,message:"Minimum value is 1"}}),className:"shadow appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",placeholder:"Enter price",disabled:v})}),(null===(t=m.price)||void 0===t?void 0:t.type)==="required"&&(0,n.jsx)("p",{role:"alert",className:"text-red-600 font-semibold mt-2",children:"Price is required"}),(null===(r=m.price)||void 0===r?void 0:r.type)==="min"&&(0,n.jsx)("p",{role:"alert",className:"text-red-600 font-semibold mt-2",children:"Minimum Price is 1"})]}),(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("label",{htmlFor:"description",className:"block text-gray-700 text-sm font-bold mb-2",children:"Description"}),(0,n.jsx)("div",{children:(0,n.jsx)("textarea",{id:"description",...u("description"),className:"shadow appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",placeholder:"Enter short description",disabled:!0})})]}),(0,n.jsx)("div",{className:"flex",children:(0,n.jsx)("button",{type:"submit",disabled:x||v,className:"bg-blue-600 hover:bg-blue-800  text-white font-bold py-3 px-4 rounded focus:outline-none focus:shadow-outline w-fit",children:"Save"})})]})]})})});t.default=u},1537:function(e,t){"use strict";t.Z={API_HOST:"http://127.0.0.1:8000/",LOCAL_STORAGE:{TOKEN:"token",USER_NAME:"username",CART:{PRODUCTS:"products"}},API_URLS:{POPULATE_DB:"api/v1/initialization/",AUTH:{LOGIN:"api/v1/core/token/",REGISTER:"api/v1/user-management/register/"},PRODUCT:{PRODUCTS:(e,t)=>"api/v1/public/products?page=".concat(e).concat(t?"&search=".concat(t):""),GET_PRODUCT:e=>"api/v1/inventory/products/".concat(e,"/"),ADD_PRODUCT:"api/v1/inventory/products/",UPDATE_PRODUCT:e=>"api/v1/inventory/products/".concat(e,"/")},INVENTORY:{PRODUCTS:(e,t,r)=>"api/v1/inventory/products/?page=".concat(e,"&type=").concat(t).concat(r?"&search=".concat(r):"")},USER_MANAGEMENT:{CURRENT_USER:"api/v1/user-management/current-user/",UPDATE_USER_PASSWORD:"api/v1/user-management/change-password/"},PAY:"api/v1/pay/"},PAGINATION:{PAGE_SIZE:10}}},9306:function(e,t,r){"use strict";r.r(t),r.d(t,{AuthenticationProvider:function(){return i},useAuth:function(){return l}});var n=r(7437),s=r(2265),o=r(1537);let a=(0,s.createContext)({}),i=e=>{let{children:t}=e,[r,i]=(0,s.useState)(!0),[l,c]=(0,s.useState)(null),u=()=>{localStorage.clear(),c(null)};return(0,s.useEffect)(()=>{c(localStorage.getItem(o.Z.LOCAL_STORAGE.TOKEN)&&localStorage.getItem(o.Z.LOCAL_STORAGE.USER_NAME)?{token:localStorage.getItem(o.Z.LOCAL_STORAGE.TOKEN),username:localStorage.getItem(o.Z.LOCAL_STORAGE.USER_NAME)}:null),i(!1)},[i]),(0,s.useEffect)(()=>{let e=e=>{e.key===o.Z.LOCAL_STORAGE.TOKEN&&!e.newValue&&l&&u()};return window.addEventListener("storage",e),()=>{window.removeEventListener("storage",e)}},[l]),(0,n.jsx)(n.Fragment,{children:r?(0,n.jsx)(n.Fragment,{children:" "}):(0,n.jsx)(a.Provider,{value:{user:l,setUserLoggedIn:e=>{(null==e?void 0:e.token)&&localStorage.setItem(o.Z.LOCAL_STORAGE.TOKEN,null==e?void 0:e.token),(null==e?void 0:e.username)&&localStorage.setItem(o.Z.LOCAL_STORAGE.USER_NAME,null==e?void 0:e.username),c(e)},isLoggedIn:!!l,logoutUser:u},children:t})})},l=()=>(0,s.useContext)(a)},5070:function(e,t,r){"use strict";r.d(t,{z:function(){return a}});var n=r(1537),s=r(3107);let o=s.default.create({baseURL:n.Z.API_HOST,timeout:4e4,headers:{Accept:"application/json","Content-Type":"application/json; charset=utf-8"}}),a=s.default.create({baseURL:n.Z.API_HOST,timeout:4e4,headers:{Accept:"application/json","Content-Type":"application/json; charset=utf-8"}});a.interceptors.request.use(e=>{let t=localStorage.getItem(n.Z.LOCAL_STORAGE.TOKEN);return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),a.interceptors.response.use(e=>e,e=>(e.response&&401===e.response.status&&(localStorage.clear(),window.location.href="/login"),Promise.reject(e))),t.Z=o}},function(e){e.O(0,[107,123,884,971,69,744],function(){return e(e.s=2184)}),_N_E=e.O()}]);