(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{7483:function(e,t,r){Promise.resolve().then(r.bind(r,3937))},6352:function(e,t,r){"use strict";var n=r(7437),s=r(9306),o=r(7907),a=r(2265);t.Z=function(e){return t=>{let{isLoggedIn:r}=(0,s.useAuth)(),l=(0,o.useRouter)();return((0,a.useEffect)(()=>{r&&l.push("/")},[r,l]),r)?null:(0,n.jsx)(e,{...t})}}},3937:function(e,t,r){"use strict";r.r(t);var n=r(7437),s=r(8792);r(2265);var o=r(2670),a=r(9306),l=r(7907),i=r(5070),u=r(1537),c=r(6123);let d=(0,r(6352).Z)(()=>{var e,t,r,d,p;let{register:m,handleSubmit:v,setError:h,formState:{errors:f}}=(0,o.cI)(),{setUserLoggedIn:x}=(0,a.useAuth)(),g=(0,l.useRouter)(),E=e=>{i.Z.post(u.Z.API_URLS.AUTH.LOGIN,e).then(t=>{200==t.status&&(x&&x({username:e.username,token:t.data.access}),c.toast.success("Login Successful!"),g.push("/"))},e=>{var t,r,n,s;let o="Invalid login attempt";(null==e?void 0:null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.detail)&&(o=null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(n=s.data)||void 0===n?void 0:n.detail),h("root.serverError",{type:"400",message:o})})};return(0,n.jsx)("div",{className:"flex justify-center items-center",children:(0,n.jsxs)("div",{className:"px-8 pt-6 pb-8 mb-4 w-full max-w-md",children:[(0,n.jsx)("h2",{className:"text-3xl font-bold mb-6 text-center",children:(0,n.jsx)("span",{className:"text-blue-500 bg-clip-text",children:"Log In"})}),(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),v(E)(e)},noValidate:!0,children:[(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("label",{htmlFor:"username",className:"block text-gray-700 text-sm font-bold mb-2",children:"Username"}),(0,n.jsx)("div",{children:(0,n.jsx)("input",{id:"username",type:"text",...m("username",{required:!0}),className:"shadow appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",placeholder:"Enter username"})}),(null===(e=f.username)||void 0===e?void 0:e.type)==="required"&&(0,n.jsx)("p",{role:"alert",className:"text-red-600 font-semibold mt-2",children:"Username is required"})]}),(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("label",{htmlFor:"password",className:"block text-gray-700 text-sm font-bold mb-2",children:"Password"}),(0,n.jsx)("div",{children:(0,n.jsx)("input",{id:"password",type:"password",...m("password",{required:!0}),className:"shadow appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",placeholder:"Enter password"})}),(null===(t=f.password)||void 0===t?void 0:t.type)==="required"&&(0,n.jsx)("p",{role:"alert",className:"text-red-600 font-semibold mt-2",children:"Password is required"})]}),(null==f?void 0:null===(r=f.root)||void 0===r?void 0:r.serverError)&&(0,n.jsx)("div",{className:"flex",children:(0,n.jsx)("p",{role:"alert",className:"text-red-600 font-semibold mt-2",children:null==f?void 0:null===(p=f.root)||void 0===p?void 0:null===(d=p.serverError)||void 0===d?void 0:d.message})}),(0,n.jsx)("div",{className:"flex items-center justify-center",children:(0,n.jsx)("button",{type:"submit",className:"bg-gradient-to-r bg-blue-500 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded focus:outline-none focus:shadow-outline w-full",children:"LogIn"})})]}),(0,n.jsxs)("p",{className:"text-center text-gray-600 mt-6",children:["Don't have an account?",(0,n.jsx)(s.default,{href:"/signup",className:"text-blue-500 hover:underline ml-2 font-semibold",children:"Sign up"})]})]})})});t.default=d},1537:function(e,t){"use strict";t.Z={API_HOST:"http://127.0.0.1:8000/",LOCAL_STORAGE:{TOKEN:"token",USER_NAME:"username",CART:{PRODUCTS:"products"}},API_URLS:{POPULATE_DB:"api/v1/initialization/",AUTH:{LOGIN:"api/v1/core/token/",REGISTER:"api/v1/user-management/register/"},PRODUCT:{PRODUCTS:(e,t)=>"api/v1/public/products?page=".concat(e).concat(t?"&search=".concat(t):""),GET_PRODUCT:e=>"api/v1/inventory/products/".concat(e,"/"),ADD_PRODUCT:"api/v1/inventory/products/",UPDATE_PRODUCT:e=>"api/v1/inventory/products/".concat(e,"/")},INVENTORY:{PRODUCTS:(e,t,r)=>"api/v1/inventory/products/?page=".concat(e,"&type=").concat(t).concat(r?"&search=".concat(r):"")},USER_MANAGEMENT:{CURRENT_USER:"api/v1/user-management/current-user/",UPDATE_USER_PASSWORD:"api/v1/user-management/change-password/"},PAY:"api/v1/pay/"},PAGINATION:{PAGE_SIZE:10}}},9306:function(e,t,r){"use strict";r.r(t),r.d(t,{AuthenticationProvider:function(){return l},useAuth:function(){return i}});var n=r(7437),s=r(2265),o=r(1537);let a=(0,s.createContext)({}),l=e=>{let{children:t}=e,[r,l]=(0,s.useState)(!0),[i,u]=(0,s.useState)(null),c=()=>{localStorage.clear(),u(null)};return(0,s.useEffect)(()=>{u(localStorage.getItem(o.Z.LOCAL_STORAGE.TOKEN)&&localStorage.getItem(o.Z.LOCAL_STORAGE.USER_NAME)?{token:localStorage.getItem(o.Z.LOCAL_STORAGE.TOKEN),username:localStorage.getItem(o.Z.LOCAL_STORAGE.USER_NAME)}:null),l(!1)},[l]),(0,s.useEffect)(()=>{let e=e=>{e.key===o.Z.LOCAL_STORAGE.TOKEN&&!e.newValue&&i&&c()};return window.addEventListener("storage",e),()=>{window.removeEventListener("storage",e)}},[i]),(0,n.jsx)(n.Fragment,{children:r?(0,n.jsx)(n.Fragment,{children:" "}):(0,n.jsx)(a.Provider,{value:{user:i,setUserLoggedIn:e=>{(null==e?void 0:e.token)&&localStorage.setItem(o.Z.LOCAL_STORAGE.TOKEN,null==e?void 0:e.token),(null==e?void 0:e.username)&&localStorage.setItem(o.Z.LOCAL_STORAGE.USER_NAME,null==e?void 0:e.username),u(e)},isLoggedIn:!!i,logoutUser:c},children:t})})},i=()=>(0,s.useContext)(a)},5070:function(e,t,r){"use strict";r.d(t,{z:function(){return a}});var n=r(1537),s=r(3107);let o=s.default.create({baseURL:n.Z.API_HOST,timeout:4e4,headers:{Accept:"application/json","Content-Type":"application/json; charset=utf-8"}}),a=s.default.create({baseURL:n.Z.API_HOST,timeout:4e4,headers:{Accept:"application/json","Content-Type":"application/json; charset=utf-8"}});a.interceptors.request.use(e=>{let t=localStorage.getItem(n.Z.LOCAL_STORAGE.TOKEN);return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),a.interceptors.response.use(e=>e,e=>(e.response&&401===e.response.status&&(localStorage.clear(),window.location.href="/login"),Promise.reject(e))),t.Z=o}},function(e){e.O(0,[107,123,884,792,971,69,744],function(){return e(e.s=7483)}),_N_E=e.O()}]);