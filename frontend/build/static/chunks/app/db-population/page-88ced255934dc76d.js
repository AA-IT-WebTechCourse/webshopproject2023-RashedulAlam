(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[307],{2758:function(e,t,n){Promise.resolve().then(n.bind(n,248))},248:function(e,t,n){"use strict";n.r(t);var a=n(7437),s=n(2265),r=n(5070),o=n(1537),i=n(9306);t.default=()=>{let[e,t]=(0,s.useState)(!1),[n,l]=(0,s.useState)(),{isLoggedIn:c,logoutUser:u}=(0,i.useAuth)(),p=()=>{t(!0),r.Z.post(o.Z.API_URLS.POPULATE_DB).then(e=>{let{data:n}=e;t(!1),(null==n?void 0:n.is_successful)?(c&&u&&u(),l("Database have been re-populated. Please login again if already logged in !")):l("There have been error. Database have not been re-populated!")})};return(0,a.jsxs)("div",{className:"flex flex-col items-center gap-6 w-full",children:[(0,a.jsx)("p",{className:"text-red-400 text-sm font-semibold",children:"Automatically populate the DB with 6 users, of which 3 users (i.e.\n        sellers) own 10 items each. Before each re-population, the DB wii be\n        emptied."}),(0,a.jsxs)("button",{className:"bg-blue-600 w-fit h-fit p-3 rounded flex gap-2 justify-between items-center relative",disabled:e,onClick:()=>p(),children:[e&&(0,a.jsxs)("svg",{className:"animate-spin h-5 w-5 text-white absolute z-10 left-[45%]",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Polulate Database"]}),n&&(0,a.jsxs)("div",{className:"flex flex-row justify-around w-full items-center",children:[(0,a.jsx)("p",{className:"text-blue-400 text-sm font-semibold",children:n}),(0,a.jsx)("button",{"aria-label":"clear message",onClick:()=>l(""),children:(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:"stroke-red-600",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,a.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})]})}},1537:function(e,t){"use strict";t.Z={API_HOST:"http://127.0.0.1:8000/",LOCAL_STORAGE:{TOKEN:"token",USER_NAME:"username",CART:{PRODUCTS:"products"}},API_URLS:{POPULATE_DB:"api/v1/initialization/",AUTH:{LOGIN:"api/v1/core/token/",REGISTER:"api/v1/user-management/register/"},PRODUCT:{PRODUCTS:(e,t)=>"api/v1/public/products?page=".concat(e).concat(t?"&search=".concat(t):""),GET_PRODUCT:e=>"api/v1/inventory/products/".concat(e,"/"),ADD_PRODUCT:"api/v1/inventory/products/",UPDATE_PRODUCT:e=>"api/v1/inventory/products/".concat(e,"/")},INVENTORY:{PRODUCTS:(e,t,n)=>"api/v1/inventory/products/?page=".concat(e,"&type=").concat(t).concat(n?"&search=".concat(n):"")},USER_MANAGEMENT:{CURRENT_USER:"api/v1/user-management/current-user/",UPDATE_USER_PASSWORD:"api/v1/user-management/change-password/"},PAY:"api/v1/pay/"},PAGINATION:{PAGE_SIZE:10}}},9306:function(e,t,n){"use strict";n.r(t),n.d(t,{AuthenticationProvider:function(){return i},useAuth:function(){return l}});var a=n(7437),s=n(2265),r=n(1537);let o=(0,s.createContext)({}),i=e=>{let{children:t}=e,[n,i]=(0,s.useState)(!0),[l,c]=(0,s.useState)(null),u=()=>{localStorage.clear(),c(null)};return(0,s.useEffect)(()=>{c(localStorage.getItem(r.Z.LOCAL_STORAGE.TOKEN)&&localStorage.getItem(r.Z.LOCAL_STORAGE.USER_NAME)?{token:localStorage.getItem(r.Z.LOCAL_STORAGE.TOKEN),username:localStorage.getItem(r.Z.LOCAL_STORAGE.USER_NAME)}:null),i(!1)},[i]),(0,s.useEffect)(()=>{let e=e=>{e.key===r.Z.LOCAL_STORAGE.TOKEN&&!e.newValue&&l&&u()};return window.addEventListener("storage",e),()=>{window.removeEventListener("storage",e)}},[l]),(0,a.jsx)(a.Fragment,{children:n?(0,a.jsx)(a.Fragment,{children:" "}):(0,a.jsx)(o.Provider,{value:{user:l,setUserLoggedIn:e=>{(null==e?void 0:e.token)&&localStorage.setItem(r.Z.LOCAL_STORAGE.TOKEN,null==e?void 0:e.token),(null==e?void 0:e.username)&&localStorage.setItem(r.Z.LOCAL_STORAGE.USER_NAME,null==e?void 0:e.username),c(e)},isLoggedIn:!!l,logoutUser:u},children:t})})},l=()=>(0,s.useContext)(o)},5070:function(e,t,n){"use strict";n.d(t,{z:function(){return o}});var a=n(1537),s=n(3107);let r=s.default.create({baseURL:a.Z.API_HOST,timeout:4e4,headers:{Accept:"application/json","Content-Type":"application/json; charset=utf-8"}}),o=s.default.create({baseURL:a.Z.API_HOST,timeout:4e4,headers:{Accept:"application/json","Content-Type":"application/json; charset=utf-8"}});o.interceptors.request.use(e=>{let t=localStorage.getItem(a.Z.LOCAL_STORAGE.TOKEN);return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),o.interceptors.response.use(e=>e,e=>(e.response&&401===e.response.status&&(localStorage.clear(),window.location.href="/login"),Promise.reject(e))),t.Z=r}},function(e){e.O(0,[107,971,69,744],function(){return e(e.s=2758)}),_N_E=e.O()}]);